# DCS ãƒŸãƒƒã‚·ãƒ§ãƒ³ç¿»è¨³ãƒ„ãƒ¼ãƒ«

## ã¯ã˜ã‚ã«

### ğŸŒ Language | è¯­è¨€ | è¨€èª | ì–¸ì–´

- ğŸ‡¨ğŸ‡³ [ç®€ä½“ä¸­æ–‡è¯´æ˜](./README.md)
- ğŸ‡ºğŸ‡¸ [English README](./README.en.md)
- ğŸ‡¯ğŸ‡µ [æ—¥æœ¬èªã®èª¬æ˜](./README.ja.md)
- ğŸ‡°ğŸ‡· [í•œêµ­ì–´ ì„¤ëª…](./README.ko.md)

DCSãƒŸãƒƒã‚·ãƒ§ãƒ³ç¿»è¨³ãƒ„ãƒ¼ãƒ«ã¯ã€DCSã®ãƒŸãƒƒã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¸­å›½èªã€æ—¥æœ¬èªã€ã¾ãŸã¯éŸ“å›½èªã«ç¿»è¨³ã™ã‚‹ãŸã‚ã®ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚
ãƒŸãƒƒã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«å†…ã®ãƒ†ã‚­ã‚¹ãƒˆã‚’æŠ½å‡ºã—ã€AIã‚’ä½¿ã£ã¦ç¿»è¨³ã—ã€ãã®å¾Œã€ç¿»è¨³ã•ã‚ŒãŸå†…å®¹ã‚’å…ƒã®ãƒŸãƒƒã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã«æ›¸ãæˆ»ã—ã¾ã™ã€‚

### ğŸ“ ä»–ã«ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹è¨€èªï¼ˆREADMEãªã—ï¼‰
- ğŸ‡ªğŸ‡¸ ã‚¹ãƒšã‚¤ãƒ³èª
- ğŸ‡«ğŸ‡· ãƒ•ãƒ©ãƒ³ã‚¹èª
- ğŸ‡©ğŸ‡ª ãƒ‰ã‚¤ãƒ„èª
- ğŸ‡®ğŸ‡¹ ã‚¤ã‚¿ãƒªã‚¢èª
- ğŸ‡³ğŸ‡± ã‚ªãƒ©ãƒ³ãƒ€èª
- ğŸ‡µğŸ‡± ãƒãƒ¼ãƒ©ãƒ³ãƒ‰èª
- ğŸ‡¸ğŸ‡ª ã‚¹ã‚¦ã‚§ãƒ¼ãƒ‡ãƒ³èª
- ğŸ‡³ğŸ‡´ ãƒãƒ«ã‚¦ã‚§ãƒ¼èª
- ğŸ‡©ğŸ‡° ãƒ‡ãƒ³ãƒãƒ¼ã‚¯èª
- ğŸ‡·ğŸ‡´ ãƒ«ãƒ¼ãƒãƒ‹ã‚¢èª
- ğŸ‡¨ğŸ‡¿ ãƒã‚§ã‚³èª
- ğŸ‡­ğŸ‡º ãƒãƒ³ã‚¬ãƒªãƒ¼èª
- ğŸ‡§ğŸ‡¬ ãƒ–ãƒ«ã‚¬ãƒªã‚¢èª
- ğŸ‡ºğŸ‡¦ ã‚¦ã‚¯ãƒ©ã‚¤ãƒŠèª
- ğŸ‡»ğŸ‡³ ãƒ™ãƒˆãƒŠãƒ èª
- ğŸ‡²ğŸ‡¾ ãƒãƒ¬ãƒ¼èª
- ğŸ‡¬ğŸ‡· ã‚®ãƒªã‚·ãƒ£èª
- ğŸ‡®ğŸ‡± ãƒ˜ãƒ–ãƒ©ã‚¤èª
- ğŸ‡¸ğŸ‡¦ ã‚¢ãƒ©ãƒ“ã‚¢èª

> âš ï¸ æ³¨æ„ï¼šã“ã‚Œã‚‰ã®è¿½åŠ è¨€èªã¯ç¿»è¨³ãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã™ãŒã€å€‹åˆ¥ã® README ãƒ•ã‚¡ã‚¤ãƒ«ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ä½¿ç”¨æ–¹æ³•ã¯è‹±èªã¾ãŸã¯ä¸­å›½èªã® README ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

## ä½¿ã„æ–¹

### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

ã¾ãšã€Java 17 ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ä»¥ä¸‹ã®ãƒªãƒ³ã‚¯ã‹ã‚‰ Java 17 ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãã ã•ã„ã€‚  
[Java 17 ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰](https://www.oracle.com/java/technologies/downloads/#java17-windows)

æ¬¡ã«ã€ãƒŸãƒƒã‚·ãƒ§ãƒ³ç¿»è¨³ãƒ„ãƒ¼ãƒ«ã®æœ€æ–°ç‰ˆã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™ã€‚ä»¥ä¸‹ã®ãƒªãƒ³ã‚¯ã‹ã‚‰æœ€æ–°ç‰ˆã‚’å–å¾—ã—ã€`/path/to/miz-translator` ã«è§£å‡ã—ã¦ãã ã•ã„ã€‚  
[æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰](https://github.com/leonchen83/miz-translator/releases/latest/download/miz-translator-release.zip)

### è¨­å®š

`/path/to/miz-translator/conf` ãƒ•ã‚©ãƒ«ãƒ€ã«ã¯ã€`trans.conf` ã¨ã„ã†è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚Šã¾ã™ã€‚ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã§ç¿»è¨³ãƒ„ãƒ¼ãƒ«ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è¨­å®šã§ãã¾ã™ã€‚

```properties
# AI ã¸ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã€‚ã“ã“ã§ã¯ã€ŒF/A 18ã€ã¯ä¸€ä¾‹ã§ã™ã€‚å¿…è¦ã«å¿œã˜ã¦èˆªç©ºæ©Ÿã®ç¨®é¡ã‚„ä½œæˆ¦ã‚’å¤‰æ›´ã—ã¦ãã ã•ã„ã€‚
hint="ã‚ãªãŸã¯ç¿»è¨³è€…ã§ã™ã€‚ä»¥ä¸‹ã¯æˆ¦é—˜æ©ŸF/A 18ã«é–¢é€£ã™ã‚‹è‹±èªã§ã™ã€‚æ—¥æœ¬èªã«ç¿»è¨³ã—ã¦ãã ã•ã„ã€‚ãŸã ã—ã€markdownã¯ä½¿ç”¨ã›ãšã€åŸæ–‡ã®æ”¹è¡Œã‚’ä¿æŒã—ã€ä½™è¨ˆãªèª¬æ˜ã¯è¿½åŠ ã—ãªã„ã§ãã ã•ã„ã€‚ã™ã¹ã¦å¤§æ–‡å­—ã®ç•¥èªã¯ãã®ã¾ã¾ä¿æŒã—ã¦ãã ã•ã„

language=ja-JP

# åˆ©ç”¨å¯èƒ½ãª AI ç¿»è¨³ã‚¨ãƒ³ã‚¸ãƒ³ï¼šdeepseekã€doubaoã€openai
translator=deepseek

# ç¿»è¨³ã‚¨ãƒ³ã‚¸ãƒ³ã® API Keyã€‚deepseek ã¾ãŸã¯ doubao ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã¯ã€ã“ã“ã« API Key ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚
apikey=your-api-key

# Open API ã®ãƒ™ãƒ¼ã‚¹ URL
baseurl=https://api.deepseek.com/v1

# ä½¿ç”¨ã™ã‚‹ AI ãƒ¢ãƒ‡ãƒ«
model=deepseek-chat

# AI ã® temperature è¨­å®šã€‚è² ã®å€¤ã‚’è¨­å®šã™ã‚‹ã¨ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãŒä½¿ç”¨ã•ã‚Œã¾ã™ã€‚
temperature=1.3

# AI ã® max_tokens è¨­å®šã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯ 4096ã€‚
maxTokens=4096

# æœ€å°ç¿»è¨³æ–‡å­—æ•°ã€‚12æ–‡å­—æœªæº€ã®ãƒ†ã‚­ã‚¹ãƒˆã¯ç¿»è¨³ã•ã‚Œãšã€å…ƒã®ã¾ã¾ã¨ãªã‚Šã¾ã™ã€‚
minimumLength=12

# ç¿»è¨³å¯¾è±¡å¤–ã«ã—ãŸã„èªå¥ã¯ filters ã«è¨˜è¿°ã€‚è¤‡æ•°æŒ‡å®šå¯èƒ½ã§ã€å„ãƒ•ã‚£ãƒ«ã‚¿ã¯ "filters" ã§å§‹ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
filters1=JAMMER COOLING
filters2=INSERT ON COURSE AUDIO

# ç¿»è¨³ã—ãŸããªã„ã‚­ãƒ¼ã‚’ keyFilters ã«æŒ‡å®šã€‚è¤‡æ•°æŒ‡å®šå¯èƒ½ã§ã€å„ã‚­ãƒ¼ã¯ "keyFilters" ã§å§‹ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
keyFilters1=DictKey_UnitName_
keyFilters2=DictKey_WptName_
keyFilters3=DictKey_GroupName_
keyFilters4=DictKey_ActionRadioText_
````

### å®Ÿè¡Œ

```shell
cd /path/to/miz-translator/bin
./trans -f /path/to/missions
```

ã“ã“ã§ `/path/to/miz-translator/bin` ã¯è§£å‡ã—ãŸãƒ•ã‚©ãƒ«ãƒ€ã®ãƒ‘ã‚¹ã€`/path/to/missions` ã¯ç¿»è¨³ã—ãŸã„ãƒŸãƒƒã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ã‚¹ã§ã™ã€‚

### ã‚¹ãƒ†ãƒƒãƒ—ã”ã¨ã®å®Ÿè¡Œ

```shell
# ã‚¹ãƒ†ãƒƒãƒ—å®Ÿè¡Œã‚‚å¯èƒ½ã§ã™
cd /path/to/miz-translator/bin

# ãƒŸãƒƒã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ãƒ†ã‚­ã‚¹ãƒˆã‚’æŠ½å‡ºã—ã€JSON ãƒ•ã‚¡ã‚¤ãƒ«ã«å‡ºåŠ›
./trans -f /path/to/missions -d

# JSON ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç¿»è¨³
./trans -f /path/to/missions -t

# ç¿»è¨³å¾Œã®ãƒ†ã‚­ã‚¹ãƒˆã‚’ .miz ãƒŸãƒƒã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã«å†åœ§ç¸®
./trans -f /path/to/missions -c
```

### éŸ³å£°ç¿»è¨³

éŸ³å£°ç¿»è¨³ã‚’è¡Œã†ã«ã¯ã€ã¾ãš `edge-tts`,`faster-whisper` ã¨ `ffmpeg` ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

```shell
# MacOS
brew install python
brew install ffmpeg
pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple
uvicorn bin.main:app --host 0.0.0.0 --port 8000

# Windows
winget install Python.Python.3.11
winget install -e --id BtbN.FFmpeg.LGPL.8.0
pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple
uvicorn bin.main:app --host 0.0.0.0 --port 8000

# verify install
$ edge-tts --version
$ ffmpeg -version
```

éŸ³å£°ç¿»è¨³ã§ã¯ã€ã¾ãš `trans` ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ç¿»è¨³æ¸ˆã¿ã®ãƒ†ã‚­ã‚¹ãƒˆã‚’ç”Ÿæˆã—ã€ãã®å¾Œä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã—ã¦ã€miz ãƒŸãƒƒã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã«ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã—ã¾ã™ã€‚

```shell
cd /path/to/miz-translator/bin
./trans -f /path/to/missions
./trans-voice -f /path/to/missions
```
### Docker

```shell
# build docker image
docker build -t miz-translator:latest .

# run text translation
docker run --rm \
  -v /path/to/trans.conf:/app/miz-translator/conf/trans.conf:ro \
  -v /path/to/miz:/tmp/miz-uploaded \
  miz-translator:latest \
  trans -f /tmp/miz-uploaded

# run voice translation
docker run --rm \
  -v /path/to/trans.conf:/app/miz-translator/conf/trans.conf:ro \
  -v /path/to/miz:/tmp/miz-uploaded \
  miz-translator:latest \
  trans-voice -f /tmp/miz-uploaded
  
# use environment variables instead of a config file
docker run --rm \
  -v /path/to/miz:/tmp/miz-uploaded \
  -e API_KEY="${api-key}" \
  -e LANG="ja-JP" \
  -e BASE_URL="https://api.deepseek.com/v1" \
  -e HINT="${hint}" \
  -e PROXY="http://proxy.example.com:8080" \
  miz-translator:latest \
  trans -f /tmp/miz-uploaded
  
docker run --rm \
  -v /path/to/miz:/tmp/miz-uploaded \
  -e API_KEY="${api-key}" \
  -e LANG="ja-JP" \
  -e BASE_URL="https://api.deepseek.com/v1" \
  -e HINT="${hint}" \
  -e PROXY="http://proxy.example.com:8080" \
  miz-translator:latest \
  trans-voice -f /tmp/miz-uploaded
  
# use local web service
docker run -d \
  --name miz-translator \
  -p 8000:8000 \
  -v /path/to/miz:/tmp/miz-uploaded \
  miz-translator:latest \
  uvicorn bin.main:app --host 0.0.0.0 --port 8000
```